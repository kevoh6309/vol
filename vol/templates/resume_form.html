<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Resume/CV Builder - ResumeBuilder Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body { 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .container { 
            max-width: 1200px; 
            margin-top: 20px; 
            background: #fff; 
            padding: 32px; 
            border-radius: 16px; 
            box-shadow: 0 4px 24px rgba(0,0,0,0.07);
        }
        h1 { 
            font-weight: 700; 
            margin-bottom: 24px; 
            color: #1e3c72;
        }
        .form-label { 
            font-weight: 600;
            color: #2d3748;
        }
        .form-section { 
            margin-bottom: 32px; 
            padding: 24px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            background: #f8fafc;
        }
        .form-section:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
        }
        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
        }
        .section-title i {
            margin-right: 8px;
            color: #667eea;
        }
        .preview-panel {
            position: sticky;
            top: 20px;
            height: fit-content;
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .preview-content {
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .auto-save-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        .auto-save-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }
        .character-count {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 4px;
        }
        .character-count.warning {
            color: #f59e0b;
        }
        .character-count.danger {
            color: #ef4444;
        }
        .suggestion-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .suggestion-btn:hover {
            background: #5a67d8;
        }
        .template-preview {
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .template-preview:hover {
            border-color: #667eea;
            background: #f7fafc;
        }
        .template-preview.selected {
            border-color: #667eea;
            background: #ebf4ff;
        }
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background: #e2e8f0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Bar -->
        <div class="mb-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h6 class="mb-0">Resume Progress</h6>
                <span class="text-muted" id="progressText">0% Complete</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
        </div>

        <h1 class="text-center mb-4">
            <i class="bi bi-file-earmark-text text-primary me-2"></i>
            Professional Resume Builder
        </h1>

        <!-- Auto-save Indicator -->
        <div class="auto-save-indicator" id="autoSaveIndicator">
            <i class="bi bi-check-circle me-1"></i>
            Auto-saved
        </div>

        <form method="POST" action="/create-resume" novalidate id="resumeForm">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <div class="row">
                <!-- Form Column -->
                <div class="col-lg-8">
                    <!-- Personal Information Section -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="bi bi-person-circle"></i>
                            Personal Information
                        </div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Full Name *</label>
                                <input type="text" name="name" class="form-control" required placeholder="e.g. John Doe" value="{{ resume.name if resume else '' }}">
                                <div class="invalid-feedback">Please enter your full name.</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Email Address *</label>
                                <input type="email" name="email" class="form-control" required placeholder="e.g. john@email.com" value="{{ resume.email if resume else '' }}">
                                <div class="invalid-feedback">Please enter a valid email.</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Phone Number *</label>
                                <input type="text" name="phone" class="form-control" required placeholder="e.g. +1234567890" value="{{ resume.phone if resume else '' }}">
                                <div class="invalid-feedback">Please enter your phone number.</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Location</label>
                                <input type="text" name="address" class="form-control" placeholder="e.g. New York, NY" value="{{ resume.address if resume else '' }}">
                            </div>
                            <div class="col-12">
                                <label class="form-label">LinkedIn Profile</label>
                                <input type="url" name="linkedin" class="form-control" placeholder="e.g. linkedin.com/in/yourname" value="{{ resume.linkedin if resume else '' }}">
                            </div>
                        </div>
                    </div>

                    <!-- Professional Summary Section -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="bi bi-card-text"></i>
                            Professional Summary
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Summary *</label>
                            <div class="input-group">
                                <textarea name="summary" id="summaryField" class="form-control" rows="4" required placeholder="Write a compelling professional summary that highlights your key strengths and career objectives..."></textarea>
                                <button type="button" class="btn btn-outline-primary" id="suggestSummary" title="Get AI suggestions">
                                    <i class="bi bi-magic"></i>
                                </button>
                            </div>
                            <div class="character-count" id="summaryCount">0/300 characters</div>
                            <div class="invalid-feedback">Please enter a professional summary.</div>
                        </div>
                    </div>

                    <!-- Education Section -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="bi bi-mortarboard"></i>
                            Education
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Education Background *</label>
                            <textarea name="education" id="educationField" class="form-control" rows="4" required placeholder="List your educational background, including degrees, institutions, and graduation dates..."></textarea>
                            <div class="character-count" id="educationCount">0/500 characters</div>
                            <div class="invalid-feedback">Please enter your education information.</div>
                        </div>
                    </div>

                    <!-- Experience Section -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="bi bi-briefcase"></i>
                            Work Experience
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Professional Experience *</label>
                            <div class="input-group">
                                <textarea name="experience" id="experienceField" class="form-control" rows="6" required placeholder="Detail your work experience, including job titles, companies, dates, and key achievements..."></textarea>
                                <button type="button" class="btn btn-outline-primary" id="suggestExperience" title="Get AI suggestions">
                                    <i class="bi bi-magic"></i>
                                </button>
                            </div>
                            <div class="character-count" id="experienceCount">0/800 characters</div>
                            <div class="invalid-feedback">Please enter your work experience.</div>
                        </div>
                    </div>

                    <!-- Skills Section -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="bi bi-lightning"></i>
                            Skills & Competencies
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Key Skills *</label>
                            <div class="input-group">
                                <textarea name="skills" id="skillsField" class="form-control" rows="3" required placeholder="List your key skills, technical competencies, and areas of expertise..."></textarea>
                                <button type="button" class="btn btn-outline-primary" id="suggestSkills" title="Get AI suggestions">
                                    <i class="bi bi-magic"></i>
                                </button>
                            </div>
                            <div class="character-count" id="skillsCount">0/400 characters</div>
                            <div class="invalid-feedback">Please enter your skills.</div>
                        </div>
                    </div>

                    <!-- Additional Sections -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="bi bi-award"></i>
                            Additional Information
                        </div>
                        <div class="row g-3">
                            <div class="col-12">
                                <label class="form-label">Certifications & Awards</label>
                                <textarea name="certifications" class="form-control" rows="3" placeholder="List relevant certifications, awards, and achievements..."></textarea>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Languages *</label>
                                <textarea name="languages" class="form-control" rows="2" required placeholder="e.g. English (Native), Spanish (Fluent), French (Intermediate)"></textarea>
                                <div class="invalid-feedback">Please enter your languages.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Template Selection -->
                    <div class="form-section">
                        <div class="section-title">
                            <i class="bi bi-palette"></i>
                            Choose Template
                        </div>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <div class="template-preview selected" data-template="modern">
                                    <h6 class="mb-2">Modern</h6>
                                    <p class="small text-muted mb-0">Clean, professional design</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="template-preview" data-template="classic">
                                    <h6 class="mb-2">Classic</h6>
                                    <p class="small text-muted mb-0">Traditional, formal layout</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="template-preview" data-template="creative">
                                    <h6 class="mb-2">Creative</h6>
                                    <p class="small text-muted mb-0">Unique, eye-catching design</p>
                                </div>
                            </div>
                        </div>
                        <input type="hidden" name="template" value="modern" id="templateInput">
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex gap-3 mt-4">
                        <button type="submit" class="btn btn-primary btn-lg px-4" id="saveBtn">
                            <i class="bi bi-check-circle me-2"></i>
                            Save Resume
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-lg px-4" onclick="window.history.back()">
                            <i class="bi bi-arrow-left me-2"></i>
                            Cancel
                        </button>
                    </div>
                </div>

                <!-- Preview Column -->
                <div class="col-lg-4">
                    <div class="preview-panel">
                        <h5 class="mb-3">
                            <i class="bi bi-eye me-2"></i>
                            Live Preview
                        </h5>
                        <div class="preview-content" id="resumePreview">
                            <div class="text-center text-muted py-5">
                                <i class="bi bi-file-earmark-text" style="font-size: 3rem;"></i>
                                <p class="mt-3">Start filling out the form to see a live preview of your resume</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize character counting
        setupCharacterCount(document.getElementById('summaryField'), 300);
        setupCharacterCount(document.getElementById('educationField'), 500);
        setupCharacterCount(document.getElementById('experienceField'), 800);
        setupCharacterCount(document.getElementById('skillsField'), 400);

        // Template selection
        document.querySelectorAll('.template-preview').forEach(preview => {
            preview.addEventListener('click', function() {
                document.querySelectorAll('.template-preview').forEach(p => p.classList.remove('selected'));
                this.classList.add('selected');
                document.getElementById('templateInput').value = this.dataset.template;
                updatePreview();
            });
        });

        // Auto-save setup
        setupAutoSave('resumeForm', '/api/auto-save-resume');

        // Progress tracking
        function updateProgress() {
            const requiredFields = ['name', 'email', 'phone', 'summary', 'education', 'experience', 'skills', 'languages'];
            let completed = 0;
            
            requiredFields.forEach(field => {
                const element = document.querySelector(`[name="${field}"]`);
                if (element && element.value.trim()) {
                    completed++;
                }
            });
            
            const percentage = Math.round((completed / requiredFields.length) * 100);
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '% Complete';
        }

        // Real-time preview
        function updatePreview() {
            const name = document.querySelector('[name="name"]').value || 'Your Name';
            const email = document.querySelector('[name="email"]').value || 'your.email@example.com';
            const phone = document.querySelector('[name="phone"]').value || '(123) 456-7890';
            const summary = document.querySelector('[name="summary"]').value || 'Professional summary will appear here...';
            const education = document.querySelector('[name="education"]').value || 'Education details will appear here...';
            const experience = document.querySelector('[name="experience"]').value || 'Work experience will appear here...';
            const skills = document.querySelector('[name="skills"]').value || 'Skills will appear here...';

            const preview = document.getElementById('resumePreview');
            preview.innerHTML = `
                <div class="border-bottom pb-3 mb-3">
                    <h4 class="mb-1">${name}</h4>
                    <p class="text-muted mb-1">${email} • ${phone}</p>
                </div>
                <div class="mb-3">
                    <h6 class="text-primary">Professional Summary</h6>
                    <p class="small">${summary}</p>
                </div>
                <div class="mb-3">
                    <h6 class="text-primary">Education</h6>
                    <p class="small">${education}</p>
                </div>
                <div class="mb-3">
                    <h6 class="text-primary">Experience</h6>
                    <p class="small">${experience}</p>
                </div>
                <div class="mb-3">
                    <h6 class="text-primary">Skills</h6>
                    <p class="small">${skills}</p>
                </div>
            `;
        }

        // Update preview and progress on input
        document.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('input', () => {
                updatePreview();
                updateProgress();
            });
        });

        // Form validation
        document.getElementById('resumeForm').addEventListener('submit', function(e) {
            if (!validateForm(this)) {
                e.preventDefault();
                showToast('Please fill in all required fields', 'error');
            } else {
                showLoading(document.getElementById('saveBtn'));
            }
        });

        // AI suggestion buttons
        document.getElementById('suggestSummary').addEventListener('click', function() {
            showToast('AI suggestions coming soon!', 'info');
        });

        document.getElementById('suggestExperience').addEventListener('click', function() {
            showToast('AI suggestions coming soon!', 'info');
        });

        document.getElementById('suggestSkills').addEventListener('click', function() {
            showToast('AI suggestions coming soon!', 'info');
        });

        // Initialize
        updateProgress();
        updatePreview();
    </script>
</body>
</html> 